<!-- TimelineCell.xml -->

<!--
 TODO: 9.17.18  [DONE 9.17.18] Fix an expanded day component butting into the cell above it. This is not visible so click and hold the click to see the mistaken expanded view.
 TODO: 9.19.18 - Add journaling function to the app.
 -->

<UITableViewCell
    reuseIdentifier="timelineCell"
    width="100%"
    height="cellHeight      // expandable height based on isDayExpanded"
    top="// this doesn't do anything"
    backgroundColor="clear  // sets all table cell color background"
    style=""
    layer.borderColor=""
    layer.borderWidth=""
    selectedBackgroundView.backgroundColor="white"
    selectedBackgroundView.layer.borderWidth="borderLength/2"
    selectedBackgroundView.layer.borderColor="clear   // must match tableview bkcolor"
    >
    
    <macro name="defaultCellHeight" value="110" />
    <macro name="expandedCellHeight" value="400" />
    <macro name="cellHeight" value="{isDayExpanded ? expandedCellHeight : defaultCellHeight}" />

    <macro name="dayBackgroundColor" value="{isDayExpanded ? white : porcelainOpaque}" />
    <macro name="dayContentTextColor" value="black" />
    <macro name="borderLength" value="8" />
    <macro name="dateWidth" value="45" />
    <macro name="dateTextColor" value="{isWeekend ? valencia : dayContentTextColor}" />

    <!-- Day Section -->
    <UIView
        width="dateWidth"
        height="cellHeight - borderLength"
        top="borderLength/2"
        backgroundColor="clear">
        
        <!-- This UIView is used to control the vertical centering of the 2 UILabel components -->
        <UIView
            width="100%"
            height="cellHeight - borderLength   // shrinks the view for border outlines to show up"
            top="50% - height/2                 // this centers the view that holds the 2 UILabel views"
            left="borderLength"
            backgroundColor="dayBackgroundColor">
        
            <UILabel
                text="{dayText}"
                width="100%"
                height="auto"
                top="50% - (height + next.height)/2"
                left="previous.left"
                textAlignment="center"
                textColor="dateTextColor"
                backgroundColor=""
                font="Avenir Next 13"
                />
                
            <UILabel
                text="{dayNumberText}"
                width="100%"
                height="auto"
                top="previous.bottom"
                left=""
                textAlignment="center"
                textColor="dateTextColor"
                backgroundColor=""
                font="Avenir Next bold 21"
                />
        
        </UIView>

    </UIView>
    
    <!-- Day Content Section -->
    <UIView
        width="100% - dateWidth - borderLength * 3"
        height="cellHeight - borderLength             // shrinks the view for border outlines to show up"
        top="borderLength/2"
        left="previous.right + borderLength * 2"
        backgroundColor="dayBackgroundColor">
        
        <!-- journal -->
        <UITextView
            outlet="//journalTextView"
            text="{journal}"
            top="8"
            left="8"
            width="100% - 16"
            height="cellHeight - 55"
            textAlignment="left"
            textColor="dayContentTextColor"
            backgroundColor="{isDayExpanded ? red : clear}"
            font="Avenir Next Italic 14"
        />
        
        <!-- Journal Entry Save Button -->
        <UIButton
            isHidden="{isDayExpanded ? false : true}"
            touchUpInside="journalEntry"
            title="Save"
            backgroundColor="mintGreen"
            top="previous.bottom + 8"
            right="8"
            width="100"
            height="26"
            layer.cornerRadius="13"
        />
        
        <UILabel
            isHidden="true"
            text="Expanded: {cellHeight}"
        />
        
    </UIView>
    
</UITableViewCell>
