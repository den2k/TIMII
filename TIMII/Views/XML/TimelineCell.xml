<!-- TimelineCell.xml -->

<!--
 TODO: 9.17.18  Fix an expanded day component butting into the cell above it. This is not visible so click and
                hold the click to see the mistakened expanded view.
 -->

<UITableViewCell
    reuseIdentifier="timelineCell"
    width="100%"
    height="cellHeight      // expandable height based on isDayExpanded"
    top=""
    backgroundColor="clear  // sets all table cell color background"
    style=""
    layer.borderColor=""
    layer.borderWidth=""
    selectedBackgroundView.backgroundColor="green"
    selectedBackgroundView.layer.borderWidth="borderLength"
    selectedBackgroundView.layer.borderColor="red   // must match tableview bkcolor"
    >
    
    <macro name="defaultCellHeight" value="120" />
    <macro name="expandedCellHeight" value="300" />
    <macro name="cellHeight" value="{isDayExpanded ? expandedCellHeight : defaultCellHeight}" />

    <macro name="dayBackgroundColor" value="porcelainOpaque" />
    <macro name="dayContentTextColor" value="black" />
    <macro name="borderLength" value="8" />
    <macro name="dateWidth" value="45" />
    <macro name="expandedColor" value="blue" />
    <macro name="dateTextColor" value="{isWeekend ? valencia : dayContentTextColor}" />

    <!-- Day Section -->
    <UIView
        width="dateWidth"
        height="cellHeight - borderLength"
        top="safeAreaInsets.top"
        backgroundColor="clear">
        
        <!-- This UIView is used to control the vertical centering of the 2 UILabel components -->
        <UIView
            width="100%"
            height="cellHeight - borderLength   // shrinks the view for border outlines to show up"
            top="50% - height/2                 // this centers the view that holds the 2 UILabel views"
            left="borderLength"
            backgroundColor="dayBackgroundColor">
        
            <UILabel
                text="{dayText}"
                width="100%"
                height="auto"
                top="50% - (height + next.height)/2"
                left="previous.left"
                textAlignment="center"
                textColor="dateTextColor"
                backgroundColor=""
                font="Avenir Next 13"
                />
                
            <UILabel
                text="{dayNumberText}"
                width="100%"
                height="auto"
                top="previous.bottom"
                left=""
                textAlignment="center"
                textColor="dateTextColor"
                backgroundColor=""
                font="Avenir Next bold 21"
                />
        
        </UIView>

    </UIView>
    
    <!-- Day Content Section -->
    <UIView
        width="100% - dateWidth - borderLength * 3"
        height="cellHeight - borderLength             // shrinks the view for border outlines to show up"
        top="safeAreaInsets.top"
        left="previous.right + borderLength * 2"
        backgroundColor="dayBackgroundColor">
        
        <UILabel
            text="{journal}"
            width="parent.width"
            height="auto"
            top="50% - height/2"
            left="previous.left"
            textAlignment="left"
            textColor="dayContentTextColor"
            backgroundColor="//red"
            font="Avenir Next 14"
        />
        
        <UILabel
            text="Expanded: {cellHeight}"
        />
        
    </UIView>
    
</UITableViewCell>
